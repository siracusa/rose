#summary Benchmark results for Rose::DB::Object.

= Rose::DB::Object Benchmarks =

The results below are from a run on my personal system (2x2.8GHz  Xeon 5400) on January 6, 2013.

(These benchmarks are very sensibly done, and I tend to use them as a way to check the performance impact of updates to DBIx::Class.  Props and thanks to Siracusa for providing them. -- Matt S Trout, DBIx::Class project founder.)

In case it isn't obvious, the modules are abbreviated like this:

{{{
CDBI - Class::DBI
CDBS - Class::DBI::Sweet
DBIC - DBIx::Class
RDBO - Rose::DB::Object
}}}

To see how these modules fare against raw DBI, check [RDBOBenchmarksWithDBI the results that include DBI].

{{{
% ./bench.pl --cmp Class::DBI,Class::DBI::Sweet,DBIx::Class --db mysql --iterations 4000 --cpu 10 --skip-intro

##
## Benchmark against Class::DBI, Class::DBI::Sweet, DBIx::Class using MySQL
##

Module             Version
-----------------  -------
Class::DBI         3.0.17
Class::DBI::Sweet  0.11
DBIx::Class        0.08204
Rose::DB::Object   0.803

# Simple: insert 1
       Rate DBIC CDBS CDBI RDBO
DBIC 1709/s   -- -26% -28% -81%
CDBS 2312/s  35%   --  -3% -74%
CDBI 2381/s  39%   3%   -- -73%
RDBO 8889/s 420% 284% 273%   --

# Complex: insert 1
       Rate DBIC CDBS CDBI RDBO
DBIC 1739/s   -- -24% -25% -77%
CDBS 2299/s  32%   --  -1% -69%
CDBI 2326/s  34%   1%   -- -69%
RDBO 7407/s 326% 222% 219%   --

# Simple: insert 2
       Rate DBIC CDBS CDBI RDBO
DBIC  924/s   -- -30% -31% -85%
CDBS 1311/s  42%   --  -2% -79%
CDBI 1333/s  44%   2%   -- -79%
RDBO 6250/s 577% 377% 369%   --

# Complex: insert 2
       Rate DBIC CDBS CDBI RDBO
DBIC  990/s   -- -31% -32% -84%
CDBS 1434/s  45%   --  -2% -76%
CDBI 1465/s  48%   2%   -- -76%
RDBO 6061/s 512% 323% 314%   --

# Simple: accessor 1
       Rate  CDBI  CDBS  DBIC  RDBO
CDBI 3.21/s    --   -0%  -88%  -95%
CDBS 3.22/s    0%    --  -88%  -95%
DBIC 27.6/s  760%  757%    --  -56%
RDBO 63.3/s 1871% 1865%  129%    --

# Complex: accessor 1
       Rate  CDBS  CDBI  DBIC  RDBO
CDBS 3.20/s    --    0%  -88%  -95%
CDBI 3.20/s    0%    --  -88%  -95%
DBIC 27.4/s  756%  756%    --  -57%
RDBO 63.7/s 1890% 1890%  133%    --

# Simple: accessor 2
       s/iter  CDBS  CDBI  DBIC  RDBO
CDBS     1.39    --   -0%  -89%  -96%
CDBI     1.39    0%    --  -89%  -96%
DBIC    0.151  826%  821%    --  -60%
RDBO 6.02e-02 2216% 2206%  150%    --

# Complex: accessor 2
     s/iter  CDBS  CDBI  DBIC  RDBO
CDBS   1.39    --   -1%  -66%  -91%
CDBI   1.38    1%    --  -66%  -91%
DBIC  0.469  197%  195%    --  -74%
RDBO  0.120 1057% 1049%  290%    --

# Simple: load 1
       Rate CDBS DBIC CDBI RDBO
CDBS 2010/s   --  -3% -29% -69%
DBIC 2062/s   3%   -- -27% -69%
CDBI 2837/s  41%  38%   -- -57%
RDBO 6557/s 226% 218% 131%   --

# Simple: load 2
       Rate DBIC CDBS CDBI RDBO
DBIC 1294/s   -- -11% -34% -74%
CDBS 1449/s  12%   -- -26% -71%
CDBI 1951/s  51%  35%   -- -60%
RDBO 4938/s 281% 241% 153%   --

# Complex: load 2
       Rate CDBS DBIC CDBI RDBO
CDBS 1159/s   -- -11% -16% -74%
DBIC 1307/s  13%   --  -5% -70%
CDBI 1379/s  19%   6%   -- -69%
RDBO 4396/s 279% 236% 219%   --

# Simple: load 3
       Rate DBIC CDBS CDBI RDBO
DBIC  536/s   -- -49% -57% -79%
CDBS 1053/s  96%   -- -15% -58%
CDBI 1238/s 131%  18%   -- -51%
RDBO 2532/s 372% 141% 104%   --

# Complex: load 3
       Rate DBIC CDBS CDBI RDBO
DBIC  538/s   -- -38% -45% -77%
CDBS  871/s  62%   -- -10% -63%
CDBI  973/s  81%  12%   -- -58%
RDBO 2339/s 335% 168% 140%   --

# Simple: update 1
       Rate DBIC CDBS CDBI RDBO
DBIC  959/s   -- -16% -33% -75%
CDBS 1140/s  19%   -- -20% -70%
CDBI 1423/s  48%  25%   -- -63%
RDBO 3846/s 301% 237% 170%   --

# Simple: update 2
       Rate DBIC CDBS CDBI RDBO
DBIC  672/s   -- -28% -41% -77%
CDBS  939/s  40%   -- -17% -68%
CDBI 1136/s  69%  21%   -- -61%
RDBO 2920/s 334% 211% 157%   --

# Complex: update 2
       Rate CDBS DBIC CDBI RDBO
CDBS  639/s   --  -0% -11% -76%
DBIC  640/s   0%   -- -11% -76%
CDBI  717/s  12%  12%   -- -73%
RDBO 2685/s 320% 319% 274%   --

# Simple: search 1
      Rate CDBS CDBI DBIC RDBO
CDBS 162/s   --  -9% -26% -68%
CDBI 178/s  10%   -- -18% -65%
DBIC 218/s  35%  23%   -- -57%
RDBO 512/s 216% 188% 135%   --

# Simple: search 2
       Rate CDBS CDBI DBIC RDBO
CDBS 63.1/s   --  -8% -53% -75%
CDBI 68.5/s   9%   -- -49% -72%
DBIC  134/s 112%  95%   -- -46%
RDBO  247/s 292% 261%  85%   --

# Complex: search 2
       Rate  CDBS  CDBI  DBIC  RDBO
CDBS 15.5/s    --   -2%  -88%  -91%
CDBI 15.9/s    2%    --  -88%  -91%
DBIC  132/s  753%  734%    --  -27%
RDBO  180/s 1062% 1036%   36%    --

# Simple: search with limit and offset
       Rate CDBS DBIC RDBO
CDBS 62.6/s   -- -53% -74%
DBIC  132/s 111%   -- -46%
RDBO  245/s 292%  86%   --

# Complex: search with limit and offset
       Rate  CDBS  DBIC  RDBO
CDBS 15.5/s    --  -88%  -92%
DBIC  132/s  753%    --  -28%
RDBO  183/s 1079%   38%    --

# Making indexes...

# Simple: search with 1-to-1 sub-objects
       Rate  DBIC  CDBS  CDBI  RDBO
DBIC 23.6/s    --  -54%  -57%  -93%
CDBS 51.3/s  117%    --   -6%  -84%
CDBI 54.9/s  132%    7%    --  -83%
RDBO  321/s 1260%  526%  486%    --

# Complex: search with 1-to-1 sub-objects
       Rate  CDBS  CDBI  DBIC  RDBO
CDBS 14.7/s    --   -2%  -38%  -95%
CDBI 15.0/s    2%    --  -37%  -95%
DBIC 23.9/s   62%   59%    --  -93%
RDBO  321/s 2082% 2039% 1245%    --

# Inserting 1-to-n records.....

# Simple: search with 1-to-1 and 1-to-n sub-objects
     s/iter DBIC CDBS CDBI RDBO
DBIC   3.42   -- -21% -33% -91%
CDBS   2.70  27%   -- -15% -88%
CDBI   2.30  49%  18%   -- -86%
RDBO  0.324 955% 734% 609%   --

# Complex: search with 1-to-1 and 1-to-n sub-objects
     s/iter CDBS DBIC CDBI RDBO
CDBS   3.63   --  -4% -11% -91%
DBIC   3.47   5%   --  -7% -90%
CDBI   3.24  12%   7%   -- -90%
RDBO  0.334 987% 938% 868%   --

# Simple: iterate 1
       Rate DBIC CDBS CDBI RDBO
DBIC 59.2/s   -- -51% -55% -85%
CDBS  122/s 106%   --  -8% -69%
CDBI  133/s 124%   9%   -- -66%
RDBO  395/s 569% 224% 198%   --

# Complex: iterate 1
       Rate DBIC CDBS CDBI RDBO
DBIC 59.8/s   -- -51% -55% -85%
CDBS  122/s 104%   --  -8% -69%
CDBI  132/s 121%   8%   -- -66%
RDBO  389/s 551% 219% 194%   --

# Simple: iterate 2
       Rate DBIC CDBS CDBI RDBO
DBIC 46.3/s   -- -15% -21% -79%
CDBS 54.4/s  18%   --  -7% -75%
CDBI 58.4/s  26%   7%   -- -73%
RDBO  218/s 371% 301% 273%   --

# Complex: iterate 2
       Rate  CDBS  CDBI  DBIC  RDBO
CDBS 14.8/s    --   -2%  -68%  -91%
CDBI 15.1/s    2%    --  -67%  -91%
DBIC 46.4/s  213%  207%    --  -72%
RDBO  165/s 1012%  989%  255%    --

# Simple: iterate 3
       Rate DBIC CDBS CDBI RDBO
DBIC 17.5/s   -- -18% -20% -87%
CDBS 21.4/s  22%   --  -3% -84%
CDBI 22.0/s  26%   3%   -- -83%
RDBO  133/s 657% 519% 502%   --

# Complex: iterate 3
       Rate CDBS CDBI DBIC RDBO
CDBS 10.5/s   --  -0% -40% -90%
CDBI 10.5/s   0%   -- -40% -90%
DBIC 17.6/s  68%  67%   -- -84%
RDBO  109/s 939% 934% 520%   --

# Dropping indexes...

# Simple: delete
            (warning: too few iterations for a reliable count)
        Rate DBIC CDBS CDBI RDBO
DBIC  1061/s   -- -16% -36% -90%
CDBS  1270/s  20%   -- -23% -88%
CDBI  1653/s  56%  30%   -- -84%
RDBO 10526/s 892% 729% 537%   --

# Complex: delete
            (warning: too few iterations for a reliable count)
        Rate  DBIC  CDBS  CDBI  RDBO
DBIC   693/s    --  -11%  -26%  -94%
CDBS   783/s   13%    --  -17%  -93%
CDBI   939/s   35%   20%    --  -92%
RDBO 11765/s 1597% 1403% 1153%    --

# Simple: insert or update
       Rate DBIC CDBS CDBI RDBO
DBIC  798/s   -- -25% -42% -86%
CDBS 1058/s  33%   -- -23% -82%
CDBI 1375/s  72%  30%   -- -77%
RDBO 5882/s 637% 456% 328%   --

# Complex: insert or update
       Rate DBIC RDBO
DBIC  519/s   -- -89%
RDBO 4706/s 806%   --
}}}